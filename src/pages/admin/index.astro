---
import { ForumAdminApp } from '@client/admin/ForumAdminApp';
import AdminTray from '@svelte/admin/AdminTray.svelte';
import PageWithTray from '@layouts/PageWithTray.astro';

// This feature is hidden in the production env with a feature flag
// SECRET_FEATURE_FLAG_Admin_tools

const visible = import.meta.env.SECRET_FEATURE_FLAG_Admin_tools === 'true';

if (!visible) {
  // Redirect to the home page if the feature is disabled
  return Astro.redirect('/');
}
---
<PageWithTray title="Admin" description="Admin tools for pelilauta">
  <div slot="app-tray">
    <AdminTray client:only="svelte"/> 
   </div>
 { visible ? (

 <ForumAdminApp client:only="solid-js"/>
 ): <div>Feature Disabled</div> }
</PageWithTray>